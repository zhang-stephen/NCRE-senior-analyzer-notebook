### 数据库系统

数据库：存储在计算机内、有组织、可共享的大量数据集合

数据库系统：采用数据库技术、有组织、动态存储大量数据供多用户访问的系统
 - 数据库
 - 硬件
 - 软件
 - 人员

数据库管理系统DBMS

### 三级模式/两级映像

模式：
 - 外模式：视图，对表处理后供使用
 - 模式：概念模式，基本表
 - 内模式：物理存储文件的方式

映像
 - 外模式-模式映像：表和视图的映射，便于修改表的数据
 - 模式-内模式映像：表和物理存储的映射，便于修改存储方式

### 数据库设计

过程：
 - 需求分析：数据流图、数据字典、需求说明书
 - 概念结构设计：E-R图
 - 逻辑结构设计：E-R图转换为关系模式
 - 物理设计：生成物理数据库

模型：
 - 关系模型：实体-联系
 - 概念模型：用户角度
 - 网状模型：实体类型和实体之间
 - 面向对象

模型的三要素：数据结构、数据操作、数据的约束条件

#### E-R模型

基本结构：
 - 椭圆：属性
 - 长方形：实体
    - 弱实体：如下图经理，依赖强实体而存在
    - 强实体：
 - 菱形：联系，两端标注联系类型（一对一，一对多，多对多）

![](https://s2.loli.net/2023/05/24/7WLmUdHcrXZynRS.png)

#### 关系模型

二维表，每一列都是属性，每一行称为元组（水平记录）

![20230524211001.png](https://s2.loli.net/2023/05/24/1ZezCiGSyAXUKIw.png)

#### E-R模型转换为关系模型

每个强实体对应一个关系模式
- 1:1：联系放到任意一端，作为属性；也可以转换为单独关系模式
- 1:N：联系可以作为一个关系模式，也可以在N端中加入1端实体的主键
- M:N：必须作为单独关系模式，主键是M和N的联合主键

#### 关系代数

表之间的代数运算：
- 并
- 交
- 差：S1-S2，消去S1中S2也具有的记录
- 笛卡尔积（$\times$）：列包含S1、S2所有的属性，行是S1、S2所有行的组合
- 投影（$\pi$）：按条件选择属性（列），下标数字表示选择的列，下标字符需要加引号
- 选择（$\sigma$）：按条件选择记录（行）
- 自然连接（$\Join$）：显示全部的属性列，相同列属性只显示一次，并选择属性相同、值相同的记录
