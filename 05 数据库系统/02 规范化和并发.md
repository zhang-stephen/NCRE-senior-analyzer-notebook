### 函数依赖

依赖：给定X，能确定一个唯一的Y，则Y依赖于X

规则：
 - 部分函数依赖：$A \to C, AB \to C$
 - 传递函数依赖：$A \ne B, A \to B, B \to C \Longrightarrow A \to C $

Armstrong公理系统：设关系模式$R<U, F>$，$U$是关系模式$R$的属性全集，$F$是$R$的一个函数依赖集：

 - 自反律：设$X \subseteq Y \subseteq U$，则$X \to Y \in F$
 - 增广律：设$X \to Y \in F$，且$Z \subseteq U$，则$XZ \to YZ \in F$
 - 传递律：设$X \to Y \in F, Y \to Z \in F$，则$X \to Z \in F$
 - 合并规则：$X \to Y, X \to Z \Longrightarrow X \to YZ$
 - 伪传递律：$X \to Y, WY \to Z \Longrightarrow XW \to Z \in F$
 - 分解规则：$X \to Y, Z \subseteq Y \Longrightarrow X \to Z \in F$

### 键与约束

概念：
 - 超键：唯一标识此表的属性的组合
 - 候选键：超键去除冗余的属性
 - 主键：任意一个候选键均可作为主键
 - 外键：其他表的主键
 - 主属性：所有候选键内都存在的属性为主属性

约束：
 - 实体完整性约束：主键约束，不能为空，不能重复
 - 参照完整性约束：外键约束，外键必须是其他表已存在的主键，或为空
 - 用户自定义完整性约束

### 范式

- 1NF：每一个分量均不可分，即不允许存在复合属性
- 2NF：如果关系R是1NF，且每一个非主属性完全函数依赖于任意一个候选键（消除部分函数依赖）
- 3NF：满足2NF，且不存在非主属性对码的传递依赖（消除传递依赖）
- BCNF：满足3NF，消除主属性对于码的部分函数依赖和传递依赖

注：依赖集中，从未出现在右侧的一定是候选键之一

规范化：

### 模式分解

- 保持函数依赖分解：保持原来的依赖集，消除冗余依赖（如传递依赖）
    - 看每个依赖左右两侧的属性是否在同一个分解的模式中（充分条件）

- 无损分解：分解后可以还原，否则为有损（属性）
    - 分解为两个：$R_1 \cap R_2 \to \pm(R_1 - R_2)$
    - 表格（适用于分解为三个及以上）：
        1. 按分解结果形成初始表（关系模式为行，所有属性为列），存在依赖关系的格子标记为对号
        2. 若关系模式中存在可以决定列的属性，则把没有对号的格子标记为对号
        3. 存在某一行全是对号，则是无损分解

### 并发控制

事务：原子性、一致性、隔离性、持续性

并发控制：控制不同的事务并发执行
 - 丢失更新
 - 不可重复读
 - 读脏数据

加锁：
 - X锁：排他锁，写锁，若对象A被加上X锁，其他事务均不能对A加任何锁
 - S锁：共享锁，读锁，对象A加上S锁，只可以被读取，其他事务也只能加S锁

封锁协议：
 - 一级封锁协议：修改数据之前加X锁，解决丢失更新问题
 - 二级封锁协议：读取数据之前加S锁，解决丢失更新、读脏数据问题
 - 三级封锁协议：一级封锁协议外加S锁，解决三种问腿·

### 封锁协议
