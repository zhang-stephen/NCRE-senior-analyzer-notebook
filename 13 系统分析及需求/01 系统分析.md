### 软件需求

需求开发：从情况收集、分析和评价到编写文档、评审等一系列产生需求的活动。
 - 获取情况
 - 分析
 - 制订规格说明书
 - 评审

分类（抽象层次降低）：
 - 业务需求：企业或客户对系统高层次的目标要求
 - 用户需求：用户的具体目标，用户要求系统能完成的任务。描述了用户能使用系统做什么
 - 系统需求：从系统的角度说明软件的需求
    - 功能：必须在系统中实现的软件功能
    - 非功能：系统必须具备的属性或者品质（质量属性和其他）
    - 设计约束：对系统的约束说明（一般是人为规定）

另一种分类方式，质量功能部署（QFD）：
 - 常规需求
 - 期望需求
 - 意外需求

### 需求获取

确定和理解不同项目干系人的需求和约束的过程。

方法：
 - 用户访谈：面向有代表性的用户，价值高但可能缺乏全面性，信息量大，需要足够的领域知识
 - 问卷：适用于用户量大，收集的需求杂乱不精准
 - 采样：样本的选择
 - 情节串联板
 - 联合需求计划JRP：联合关键用户代表、系统分析师、开发团队代表，通过有组织的会议分析需求
 - 需求记录技术

### 需求分析

将杂乱的用户要求和期望转化为用户需求。

好的需求：
 - 无二义性，完整性，一致性，可测试性，确定性，可跟踪性，正确性，必要性

任务：
 - 绘制系统上下文范围关系图
 - 创建用户界面原型
 - 分析需求可行性
 - 确定需求优先级
 - 为需求建立模型
 - 创建数据字典
 - 使用QFD

#### 结构化分析

特点：自顶向下，逐步分解，面向数据流

模型：功能模型（数据流图），行为模型（状态转换图），数据模型（E-R图）

![13-req-analysis-structural.png](https://s2.loli.net/2023/05/19/7V1gvjGQReTDa9y.png)

##### 数据流图

描述数据在系统中如何被传送或变换、以及如何对数据流进行变换的功能或子功能，用于功能建模。

![13-data-flow.png](https://s2.loli.net/2023/05/19/47Hx9zcPlivaNkY.png)

#### 面向对象分析

面向对象的基本概念：
 - 对象：数据及其操作构成的封装，描述客观事务，包含对象名、属性和方法
 - 类：实体的形式化描述
    - 实体类：现实世界中存在的真实实体
    - 接口类（边界类）：为用户提供和系统交互的方式
    - 控制类：控制活动流，充当协调者
 - 抽象：实例抽取共同特征后形成概念的过程。强调主要特征，忽略次要特征
 - 封装：信息隐蔽技术
 - 继承：类的层级关系
 - 多态：不同对象收到统一消息时产生完全不同的结果
    - 参数多态：模板化
    - 包含多态：父子类型
    - 过载多态：重载
    - 强制多态：强制类型转换
 - 接口：描述操作规范
 - 消息：对象之间的交互
 - 覆盖：子类使用自己的实现置换父类的相应方法
 - 函数重载：同名不同参数，**注意和覆盖区分**
 - 绑定：动态/静态

**对象是类的实体，类是对象的模板**。

![](https://s2.loli.net/2023/05/19/8mo2U4GwMIyusBO.png)

目的：确定问题域，理解问题，建议用例模型、分析模型
 - 认定对象
 - 组织对象
 - 描述对象的相互作用
 - 确定对象操作
 - 定义对象的内部信息

### UML

结构：
 - 构造块
    - 事物：重要组成部分
    - 关系：把事物紧密联系在一起
    - 图：多个相互关联的事物的集合
 - 规则
 - 公共机制

![](https://s2.loli.net/2023/05/19/7lbnE3HTGdK26OC.png)

事物分类：
 - 结构事物：静态部分，如类、接口、用例、构件
 - 行为事物：动态部分，如交互、活动、状态机
 - 分组事物：模型的组织部份，如包
 - 注释事物：模型的解释部分

事物之间的关系：
 - 依赖：一个事物的语义依赖于另一个事物的语义的变化而变化
 - 关联：描述对象之间的连接；组合与聚合都是指部分和整体的关系
    - 组合：关系更强，拥有相同的生命周期（人与大脑）
    - 聚合：关系稍弱，没有共同的生命周期（个体与种群）
 - 泛化：一般/特殊的关系
 - 实现：一个类元指定了另一个类元保证执行的契约

![](https://s2.loli.net/2023/05/19/YAI16R48wPLakHg.png)

UML通常**不用于**对象快照进行建模。

#### 常见的UML图

类图：静态，系统的静态设计视图，展现一组对象、接口、协作和它们之间的关系

![](https://s2.loli.net/2023/05/19/bPlUqXvOFB9h7iR.png)

对象图：静态，某一时刻一组对象及它们之间的关系，没有类图时，对象图就是系统的静态设计视图

![](https://s2.loli.net/2023/05/19/HVnDY3L7zBkJ2I9.png)

用例图：静态，展现一组用例、参与者及他们之间的关系；用例==特有==关系：扩展、包含、泛化
 - 参与者：实体，参与系统活动的实体
 - 用例：参与者的功能
 - 用例的关系
   - 扩展：两件事之间没有明确关系
   - 包含：做一件事之前必须先做另一件事情
   - 泛化：父子关系
 - **注意箭头的方向**

![](https://s2.loli.net/2023/05/19/FDcXiglUrC8jQfL.png)

序列图（序列图）：动态，描述以时间顺序组织的对象之间的交互活动
   - 同步消息：阻塞调用，调用者终止执行等待控制权返回
   - 异步消息：不引起调用者阻塞
   - 返回消息：从右到左

![](https://s2.loli.net/2023/05/19/lW2cYQ6o5rjeUbC.png)

通信图（协作图）：动态，强调参加交互的对象的组织

![](https://s2.loli.net/2023/05/19/M61Of9JYaWQkIdP.png)

状态图：动态，描述单个对象在多个用例中的行为
 - 箭头：触发事件
 - 实心圆点：起点或终点

![](https://s2.loli.net/2023/05/19/UO4ZywVkc1MihPe.png)

活动图：动态，特殊的状态图，展现了**系统内**一个活动到另一个活动的流程

![](https://s2.loli.net/2023/05/19/AFjdEkPMgeKZc8s.png)

组件图：静态，系统静态实现视图，展现了一组构件之间的组织和依赖。
 - 供接口
 - 需接口

![](https://s2.loli.net/2023/05/19/2ZxArPTHmCoOcJ6.png)

部署图：系统的静态部署视图，翻译物理模块的节点分布

![](https://s2.loli.net/2023/05/19/2ZFAxB1T45mMGpD.png)

#### UML视图

![](https://s2.loli.net/2023/05/19/QuW9OgnHAvRqLUK.png)

- 逻辑视图（设计视图）：设计模型中在架构方面具有重要意义的部分，如类、子系统、包和用例实现的子集
- 进程视图：可执行线程和进程作为活动类的建模，是逻辑视图的一次执行实例，描述并发和同步结构
- 实现试图：对构成系统的物理代码文件和构件进行建模
- 部署视图：把构件部署到物理节点的视图
- 用例视图：最基本的需求分析模型

### 需求定义

输出：**软件需求规格说明书SRS**。整个开发工作的基础。

方法：
 1. 严格定义：结构化定义，假设所有需求都可以被预先定义
 2. 原型方法：迭代的循环型开发方法

### 需求验证

输出：**需求基线**。是需求管理的基础。

与用户一起确认需求无误，包含两阶段：
 - 需求评审：正式/非正式
 - 需求测试：设计概念测试用例

验证通过后，需要用户签字确认，作为验收标准之一。此时的SRS即是**需求基线**，如需更新则需要进行需求变更流程。

### 需求管理

![](https://s2.loli.net/2023/05/19/6mjNRJWTEnrxpDv.png)

- 定义需求基线
- 需求变更和风险
   - 风险做法：无足够用户参与、忽略用户分类、用户需求不断增加、需求不清晰、不必要特性、SRS过于精简、估算不准确
   - 变更的原因：外部环境变化、需求设计不完整、新技术出现、公司机构重组
   - 变更控制委员会CCB：评价、审批、监督变更的实施
   - 变更流程见下图

![](https://s2.loli.net/2023/05/19/VgSGfU6sYj2KNkc.png)

- 需求跟踪：双向跟踪，使用用例表格（用例为行，原始需求为列）
   - 正向：用户原始需求是否实现
   - 反向：软件实现是否都符合用户需求
   - 若某行没有标记，则原始需求未实现；若某列没有实现，则用例未实现
